<html><head><title>Косвенный Взлом Программ на примере игры Mario</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="description" content="Рекомендации по косвенному залому программ с примером-исходником для игрушки Mario (included).">
<meta name="keywords" content="pascal, sources, source code, mario_cr, hacker, Хакерские Штучки ">
<LINK REL=STYLESHEET TYPE="text/css" HREF="../sources.css"></head><BODY><center>
<!--#include virtual="/t_hmenu.htm"-->

<div align='left'>&nbsp;&nbsp;&nbsp;<a class='title' href="index.htm">Хакерские Штучки</a>&nbsp&nbsp;&nbsp;&nbsp;<small>&gt;&gt;</small>&nbsp;&nbsp;&nbsp;&nbsp;mario_cr
<br>&nbsp;&nbsp;&nbsp;<img border=0 height=4 width=50% align='top' src="../img/b.gif" alt="">
<br>&nbsp;
</div>

<TABLE cellSpacing=0 cellpadding=0 width=97% border=0>

<TR class=subheader><TD colSpan=3><IMG height=2 src="../img/1x1.gif" width=1></td></tr>
<TR><TD class=subheader width=70% nowrap>&nbsp;Косвенный Взлом Программ на примере игры Mario</TD>
<TD nowrap class=black>&nbsp;<img border=0 align=bottom src="../img/mail.gif">&nbsp;<a href="mailto:wozza@yandex.ru">Eugene Zagidullin</a></TD>
<TD class=black align='right'>11.08.2000</TD></TR>
<TR vALign=top><TD class=black><br>
<p style="margin-left:20px">Рекомендации по косвенному залому программ
с примером-исходником для игрушки Mario (included).</TD><TD class=black colspan=2 align='right'><br><A HREF="mario_cr.zip"><img border=0 align=middle src="../img/dsk.gif"></A><br>2k&nbsp;</TD></TR><TR><TD>&nbsp;</TD></TR>

<TR class=subheader><TD colSpan=3><IMG height=2 src="../img/1x1.gif" width=1></td></tr>
<TR><TD colspan=3><PRE><p style="margin-left:50px">                      Косвенный залом программ.
                      -------------------------

     Косвенный залом  - довольно эффективный прием для изменения приз-
нака легальности в прикладных программах,  запрета изменения  счетчика
жизней в играх, и т.д.
     Принцип косвенного залома состоит в периодическом изменении ячеек
памяти, принадлежащих программе; чаще всего, это выполняет резидент по
прерыванию таймера.  Для выяснения адресов этих ячеек (адреса, естест-
венно, не абсолютные, а от PSP) применяют специальные программы - дам-
перы,  которые  скидывают  на  диск дампы памяти по нажатию какой-либо
комбинации на клавиатуре. В дамп, чаще всего, записывается вся память-
от PSP,  включительно,  до конца основной памяти. После получения нес-
кольких дампов,  их побайтно сравнивают для  определения  изменившихся
ячеек и их смещений в файле. Программа сравнения выдает текстовый файл
примерно следующего содержания:

  &lt;сегмент1&gt;:&lt;смещение1&gt; &lt;байт из 1-го дампа&gt; &lt;байт из 2-го дампа&gt; ...
  &lt;сегмент2&gt;:&lt;смещение2&gt; &lt;байт из 1-го дампа&gt; &lt;байт из 2-го дампа&gt; ...
  ...

     После этого остается найти в этом файле строки,  содержащие необ-
ходимые данные, например счетчик жизней в игре:

     &lt;сегмент&gt;:&lt;смещение&gt; 04 03 02 01

     (Подразумевается, что дампы записывались после каждого уменьшения
числа жизней).  Далее мы используем специальную  резидентную  утилиту,
которой передаем полученные данные:

     &lt;сегмент&gt;:&lt;смещение&gt; 04

     И во  время  работы  программы она будет периодически заносить по
указанному адресу число 4,  таким образом,  число  жизней  никогда  не
опустится ниже 4 (правда и не поднимется :-( ).

     А теперь - то,  ради чего заводился этот монолог: после получения
интересующих  нас адресов,  гораздо удобнее будет написать собственную
утилиту для залома.  Для примера в файле MARIO!.PAS  приводится  такой
кряк для  замечательной  игрушки Mario!.  Этот кряк делает героя бесс-
мертным, и дает ему возможность стрелять,  не утруждая  себя  поисками
цветка. Также  эта  программа может послужить прототипом для написания
Ваших собственных ломалок.
     Примечание: для  получения и сравнения дампов был использован па-
кет HTOOLS by Oleg N. Kolesnikov.

     PS: В недалеком будущем я планирую написать  собственную  удилиту
дампирования/сравнения.

                              С уважением, Евгений Загидуллин (WoZZa)
                                                      wozza@yandex.ru</PRE>

<!--#include virtual="/t_footer.htm"-->
