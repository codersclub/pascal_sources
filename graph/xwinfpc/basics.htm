<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Основные понятия - Программирование X Window средствами Free Pascal - Исходники.Ру</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="description" content='Курс лекций по программированию на FPC в X Window на платформе Unix. Основные понятия.'>
<meta name="keywords" content="pascal, sources, source code, graph, kde, unix, window, графика ">
<LINK REL=STYLESHEET TYPE="text/css" HREF="/sources.css"></head><BODY><center>

<!--#include virtual="/t_hmenu.htm"-->


<div align='left'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class='blueb' href="/graph/index.htm">Графика</a>&nbsp&nbsp;&nbsp;&nbsp;<small>&gt;&gt;</small>
<br>&nbsp;&nbsp;&nbsp;<img border=0 height=4 width=50% align='top' src="/img/b.gif" alt="">
<br>&nbsp;
</div>


<TABLE cellSpacing=0 cellpadding=0 width=97% border=0>
<TR><TD colspan=3><p style="margin-left:50px">

<CENTER>
<H1>Программирование в X-Window
<br>средствами Free Pascal</H1>
Авторы: А.П. Полищук, С.А. Семериков
<BR>
[Оформление в HTML: <a class=blue href="mailto:rswag@sources.ru">Valery Votintsev</a>]
</CENTER>

<A class=blue HREF="../xwinfpc.htm">Содержание</a>
<br>
1. <A class=blue HREF="xbasics.htm">Основы программирования в системе X Window</A>
<hr>
<!-- begin CONTENT -->

<h2>1.1. Основные понятия</h2>

<dir>

<h3>1.1.1. Общее устройство X Window</h3>

<br>

Система X Window представляет совокупность программ и библиотек.
Сердцем ее является отдельный UNIX-процесс, существующий на компьютере,
к которому присоединен дисплей. Именно <I>сервер</I> знает особенности
конкретной аппаратуры, знает, что надо предпринять, чтобы закрасить
пиксель на экране, нарисовать линию или другой графический объект.
Он также умеет воспринимать сигналы, приходящие от клавиатуры и мыши.

<br>
<br>

Сервер общается с программами-клиентами, посылая или
принимая от них порции (пакеты) данных. Если сервер и клиент работают на
разных машинах, то данные посылаются по сети, если же компьютер один, то для
передачи данных используется внутренний канал. Например, если сервер
обнаруживает, что нажата кнопка мыши, то он подготавливает соответствующий
пакет и посылает его тому клиенту, в чьем окне находится курсор мыши. И
наоборот, если программе надо что-либо вывести на экран дисплея, то она
создает необходимый пакет данных и посылает его серверу.

<br>
<br>

Состав пакетов и их последовательность определяются
специальным протоколом. Но чтобы программировать для X, совсем не обязательно
знать детали реализации сервера и протокола обмена. Система предоставляет
библиотеку процедур, с помощью которых программы осуществляют доступ к
услугам X на высоком уровне. Так для того, чтобы вывести на экран точку,
достаточно вызвать процедуру <code>XDrawPoint()</code>,
передав ей соответствующие параметры. Последняя
выполняет всю черновую работу по подготовке и передачи пакетов данных
серверу. Упомянутая библиотека называется <I>Xlib</I>. Она помещается
в файле <code>lX11.a (libX11.so)</code>,
который, как правило, находится в каталоге <code>/usr/X11R6/lib</code>.
Прототипы функций библиотеки, используемые ею
структуры данных, типы и прочее определяется в файлах-заголовках из
директории <code>/usr/include/X11</code>.

<br>
<br>

На рис. 1.1 представлена схема общения клиентов и сервера.

<br>
<br>

<CENTER><IMG SRC="images/image2.gif" WIDTH=575 HEIGHT=409>

<br>
<br>

Рис. 1.1. Общая схема общения программ-клиентов и X-сервера
</center>

<br>
<br>

Посылка порций данных, особенно если она осуществляется
через сеть, операция достаточно медленная. Чтобы повысить производительность
системы, Xlib не отправляет пакеты сразу, а буферизует их в памяти машины, на
которой выполняется программа-клиент. Собственно передача выполняется в тот
момент, когда клиент вызывает процедуру, ожидающую получения событий от
сервера, например <code>XNextEvent()</code>.
Программа может явно инициировать отправку пакетов, обратившись к функциям
<code>XFlush()</code> или <code>XSync()</code>.

</dir>
<br>


<!-- end of CONTENT -->
<!--#include virtual="/t_footer.htm"-->
