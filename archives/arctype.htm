<html><head><title>Определение типа архива</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="description" content="Функция определения типа архива по наличию в файле специфических сигнатур.">
<meta name="keywords" content="pascal, sources, source code, arctype, archives, Архивы и Архиваторы ">
<LINK REL=STYLESHEET TYPE="text/css" HREF="../sources.css"></head><BODY><center>
<!--#include virtual="/t_hmenu.htm"-->
<div align='left'>&nbsp;&nbsp;&nbsp;<a class='title' href="index.htm">Архивы и Архиваторы</a>&nbsp&nbsp;&nbsp;&nbsp;<small>&gt;&gt;</small>&nbsp;&nbsp;&nbsp;&nbsp;arctype
<br>&nbsp;&nbsp;&nbsp;<img border=0 height=4 width=50% align='top' src="../img/b.gif" alt="">
<br>&nbsp;
</div>

<TABLE cellSpacing=0 cellpadding=0 width=97% border=0>

<TR class=subheader><TD colSpan=3><IMG height=2 src="../img/1x1.gif" width=1></td></tr>
<TR><TD class=subheader width=70% nowrap>&nbsp;Определение типа архива</TD>
<TD nowrap class=black>&nbsp;<img border=0 align=bottom src="../img/mail.gif">&nbsp;<a href="mailto:2:5030/31">Dmitry Moskovich</a></TD>
<TD class=black align='right'>20.03.1993</TD></TR>
<TR vALign=top><TD class=black><br>
<p style="margin-left:20px">Функция определения типа архива по наличию
в файле специфических сигнатур.</TD><TD class=black colspan=2 align='right'><br><A HREF="arctype.zip"><img border=0 align=middle src="../img/dsk.gif"></A><br>1k&nbsp;</TD></TR><TR><TD>&nbsp;</TD></TR>

<TR class=subheader><TD colSpan=3><IMG height=2 src="../img/1x1.gif" width=1></td></tr>
<TR><TD colspan=3><PRE><p style="margin-left:50px">Organization: NetDialogue (Gid:gate.dialnet.msk.su)

Чтобы выяснить тип архивированного файла я в своих программах делаю так:

Var
 Buffer : Longint;
 F      : file;
Begin
 BlockRead(f,Bufer,4);
 If Bufer=$4034b50 then CurCompress:=Zip
  else If (Lo(Bufer)=$60) and (Hi(Bufer)=$EA) then CurCompress:=Arj
   else If (Bufer=$2554531A) or (Bufer=$2550481A) then CurCompress:=Hyp
    else If Lo(Bufer)=$1A then CurCompress:=Arc
     else If Bufer=$204F4F5A then CurCompress:=Zoo
      else
       begin
        Seek(f,0);
        BlockRead(f,LzhIceDop,1);
        Seek(f,2);
        Blockread(f,Signature,2);
        If Signature=$6C2D then CurCompress:=Lzh
        else CurCompress:=None
       end;


Может можно и пpоще, но так надежней -- во всяком случае еще ни pазу
он ничего не пеpепутал. Вот.
                                       Dilys Newman

--- Maximus 2.01wb
 * Origin: Night Star BBS (2:5030/31)
</PRE>
<!--#include virtual="/t_footer.htm"-->
