<html><head><title>Изменение палитры в графическом режиме</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="description" content='Краткий экскурс в регистры палитры для тех, кто не знает, что такое палитра, и как получается цвет на экране'>
<meta name="keywords" content="pascal, sources, source code, palitr, screen, Экранные Средства ">
<LINK REL=STYLESHEET TYPE="text/css" HREF="../sources.css"></head><BODY><center>

<!--#include virtual="/t_hmenu.htm"-->


<div align='left'>&nbsp;&nbsp;&nbsp;<a class='title' href="index.htm">Экранные Средства</a>&nbsp&nbsp;&nbsp;&nbsp;<small>&gt;&gt;</small>&nbsp;&nbsp;&nbsp;&nbsp;palitr
<br>&nbsp;&nbsp;&nbsp;<img border=0 height=4 width=50% align='top' src="../img/b.gif" alt="">
<br>&nbsp;
</div>


<TABLE cellSpacing=0 cellpadding=0 width=97% border=0>

<TR class=subheader><TD colSpan=3><IMG height=2 src="../img/1x1.gif" width=1></td></tr>
<TR><TD class=subheader width=70% nowrap>&nbsp;Изменение палитры в графическом режиме</TD>
<TD nowrap class=black>&nbsp;Константин Поддубный</TD>
<TD class=black align='right'>18.01.1995</TD></TR>
<TR vALign=top><TD class=black>&#10;<p style="margin-left:20px">Краткий экскурс в регистры палитры для тех, кто не знает,
что такое палитра, и как получается цвет на экране</TD><TD class=black colspan=2 align='right'><br><A HREF="palitr.zip"><img border=0 align=middle src="../img/dsk.gif"></A><br>2k&nbsp;</TD></TR><TR><TD>&nbsp;</TD></TR>

<TR class=subheader><TD colSpan=3><IMG height=2 src="../img/1x1.gif" width=1></td></tr>
<TR><TD colspan=3><PRE><p style="margin-left:50px">From:  "Constantin Poddubny" &lt;const@const.krasnoyarsk.su&gt;
Subject: Re: Изменение палитры в graph mode.
Organization: The Sosnovoborsk Municipal Venture for Housing and
Date: Wed, 18 Jan 1995 07:28:19 GMT

&gt;        Hi All.
&gt;        Есть вопросик.
&gt;        Можно-ли в графическом режиме 13H производить плавное
&gt;        затухание экрана т,е, изменение палитры.
&gt;        Видел исходник на цэ но они там в порт нецелое значение как-то
&gt;        пишут а в Паскале так нельзя.
&gt;        А если это значение округлять то плавного перехода
&gt;        нет и экран скачет :(
&gt;        Помогите please кто сталкивался.
&gt;        ---
&gt;        *-=| С уважением Виктор |=-*

                Всем привет, и особенно Виктору!

   Плавное изменение палитры экрана можно  делать  запросто.  Не  знаю
как это выглядит  на  Паскале  с  использованием  процедур  из  модуля
Graph,  но  с  использованием  встроенного  Ассемблера  и  BIOSa   это
делается примерно так, как описано ниже (все это справедливо  для  VGA
и SVGA).
   Краткий экскурс в регистры палитры для тех, кто не знает, что такое
палитра и как получается цвет на экране:
   В 256-ти цветных режимах используются 256*3  8-ми  битных  регистра
палитры, при этом для каждого из 256-ти цветов  отводится  3  регистра
по одному на свой цвет - красный, синий, зеленый.  В  каждом  регистре
хранится 6 бит цвета.
   Цвет на экране  получается  следующим  образом:  аппаратура  читает
байт из видеопамяти; полученное значение  используется  как  индекс  в
массиве регистров палитры для получения 3 байт  цвета,  точнее  6*3=18
бит цвета. Таким образом, одновременно на экране может быть отображено
256 цветов из палитры 2**18=262144 цветов.
   Предположим, что нам нужно плавно изменить какой-то цвет. В  теории
это выглядит так:
   Цвет номер 15 первоначально ярко-белый:
    Red   Green    Blue
  111111  111111  111111       ярко-белый
  111110  111110  111110       белый, но менее яркий
............................................
  001111  001111  001111       серый
  001110  001110  001110       серый, но потемнее
............................................
  000001  000001  000001       почти черный
  000000  000000  000000       черный

   Таким образом, мы получили 64  градаций  цвета  от  ярко-белого  д